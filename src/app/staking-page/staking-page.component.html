<div class="content-container">
  <div class="content-block" [ngClass]="{ 'no-active': !account }">
    <div class="content-block_title">
      <span>Create deposit</span>
      <span class="content-block_title_help"></span>
    </div>
    <div class="blocks-list without-arrow_separator">
      <form
        #depositForm="ngForm"
        class="staking-form"
        [ngClass]="{ disabled: depositTokensProgress }"
      >
        <div class="staking-form__item staking-form__item-deposit">
          <div class="staking-form__item-deposit__item-first">
            <span class="staking-form__item-title cl-aqua"
              >Enter depoist amount</span
            >
            <input
              *ngIf="account"
              type="text"
              class="staking-form__item-input cl-aqua"
              autocomplete="off"
              required="required"
              [appBigNumber]="{
                decimals: tokensDecimals['HEX2X'],
                min: 1,
                max: account?.balances.HEX2X.wei
              }"
              name="deposit-amount"
              placeholder="0.0"
              (ngModelChange)="onChangeAmount()"
              [maxValueChange]="onChangeAccount"
              [(ngModel)]="formsData.depositAmount"
            />
            <div class="staking-form__item-icon-wrap">
              <span
                class="staking-form__item-icon cl-red-light icon icon__axion"
                >AXN</span
              >
            </div>
            <div class="staking-form__item-actions">
              <div class="staking-form__item-actions-amount">
                <span
                  (click)="
                    formsData.depositAmount = account?.balances.HEX2X.shortBigNumber.toString()
                  "
                  class="staking-form__item-actions-amount-btn"
                  >Send max</span
                >
                <span class="staking-form__item-actions-amount-text"
                  >Balance {{ account?.balances?.HEX2X.display }}</span
                >
              </div>
            </div>
          </div>
          <div class="staking-form__item-deposit__item">
            <span class="staking-form__item-title">Set deposit period</span>
            <input
              class="staking-form__item-input cl-white"
              type="number"
              step="1"
              autocomplete="off"
              [appMinMaxNumber]="{
                min: 1,
                max: depositMaxDays
              }"
              min="1"
              (ngModelChange)="onChangeAmount()"
              [max]="depositMaxDays"
              placeholder="1"
              required="required"
              name="deposit-days"
              [(ngModel)]="formsData.depositDays"
            />
            <div class="staking-form__item-actions">
              <div class="staking-form__item-actions-amount">
                <span class="staking-form__item-actions-amount-btn">DAY</span>
              </div>
              <span class="staking-form__item-text"
                >ENDS {{ stakeDays | date: "d.M.y" }}
              </span>
            </div>
          </div>
        </div>
        <div class="staking-form__item">
          <span class="staking-form__item-title" style="text-align: center"
            >Shares</span
          >
          <hr />
          <div class="staking-form__item-shares">
            <div class="staking-form__item-shares__item">
              <span class="staking-form__item-shares__item-value">
                {{ shareRate || 0 }}</span
              >
              <span class="staking-form__item-shares__item-text"
                >Share rate
                {{
                  stakingContractInfo.ShareRate
                    | bigNumberFormat: tokensDecimals.HEX2X:true:false:4 || 0
                }}
              </span>
            </div>
            <div class="staking-form__item-shares__item">
              <span class="staking-form__item-shares__item-text"
                >Longer Pays <br />
                Better</span
              >
              <span class="staking-form__item-shares__item-value">{{
                bonusLongerPays
                  | bigNumberFormat: tokensDecimals.HEX2X:true:false:4
              }}</span>
            </div>
          </div>
          <button
            class="btn btn__normal uppercase nowrap"
            (click)="openDeposit()"
            [ngClass]="{ progress: depositTokensProgress }"
            [disabled]="depositForm.invalid || depositDaysInvalid"
          >
            <span class="lds-ellipsis" *ngIf="depositTokensProgress">
              <span class="lds-ellipsis-container">
                <span></span><span></span><span></span><span></span>
              </span>
            </span>
            <span>&nbsp;&nbsp;Deposit&nbsp;&nbsp;</span>
          </button>
        </div>
      </form>

      <!-- <div class="width-33 blocks-list_new-item">
        <div class="blocks-list_element">
          <div class="blocks-list_item no-padding">
            <div class="blocks-list_item_title uppercase">
              Big pay day pool
              <div
                class="question"
                mat-raised-button
                matTooltip="Info about the action"
                matTooltipClass="question__tooltip"
              ></div>
            </div>
            <div class="blocks-list_item_description">
              Stake for 350 days or more and get bonus revenue
            </div>
            <div class="blocks-list_item_values">
              <div class="blocks-list_item_values_item">
                <div
                  class="blocks-list_item_value inherit-align"
                  fittext
                  [maxFontSize]="38"
                >
                  {{
                    stakingContractInfo.closestYearShares || 0
                      | bigNumberFormat: tokensDecimals.HEX2X:true:false:4
                  }}
                </div>
                <div class="blocks-list_item_label uppercase">Shares</div>
              </div>
              <div class="blocks-list_item_values_item">
                <div
                  class="blocks-list_item_value inherit-align"
                  fittext
                  [maxFontSize]="38"
                >
                  {{
                    stakingContractInfo.closestPoolAmount || 0
                      | bigNumberFormat: tokensDecimals.HEX2X:true:false:4
                  }}
                </div>
                <div class="blocks-list_item_label uppercase">AXN</div>
              </div>
            </div>
          </div>
        </div>
      </div> -->
    </div>
  </div>

  <div
    class="content-block"
    *ngIf="depositsLists?.opened.length && tokensDecimals"
  >
    <div class="content-block_title text-left">
      <span>Opened deposits</span>
    </div>
    <table class="standard-table" cellpadding="0" cellspacing="0" border="0">
      <thead>
        <tr>
          <th
            (click)="sortDeposits('opened', 'start')"
            class="as-sort"
            [ngClass]="{
              active: currentSort['opened']['field'] === 'start',
              ask: currentSort['opened']['ask']
            }"
          >
            Start date
            <span class="sort-indicator"></span>
          </th>
          <th
            (click)="sortDeposits('opened', 'end')"
            class="as-sort"
            [ngClass]="{
              active: currentSort['opened']['field'] === 'end',
              ask: currentSort['opened']['ask']
            }"
          >
            End date
            <span class="sort-indicator"></span>
          </th>
          <th
            (click)="sortDeposits('opened', 'amount')"
            class="as-sort"
            [ngClass]="{
              active: currentSort['opened']['field'] === 'amount',
              ask: currentSort['opened']['ask']
            }"
          >
            Principal
            <span class="sort-indicator"></span>
          </th>
          <th
            (click)="sortDeposits('opened', 'shares')"
            class="as-sort"
            [ngClass]="{
              active: currentSort['opened']['field'] === 'shares',
              ask: currentSort['opened']['ask']
            }"
          >
            Shares
            <span class="sort-indicator"></span>
          </th>

          <th
            (click)="sortDeposits('opened', 'shares')"
            class="as-sort"
            [ngClass]="{
              active: currentSort['opened']['field'] === 'shares',
              ask: currentSort['opened']['ask']
            }"
          >
            BigPayDay
            <span class="sort-indicator"></span>
          </th>
          <th>Interest</th>
          <th width="10">&nbsp;</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let deposit of depositsLists.opened">
          <td>{{ deposit.start | date: "dd.MM.yyyy" }}</td>
          <td>{{ deposit.end | date: "dd.MM.yyyy" }}</td>
          <td>
            {{
              deposit.amount
                | bigNumberFormat: tokensDecimals["HEX2X"]:true:false:5
            }}&nbsp;AXN
          </td>
          <td>
            {{
              deposit.shares
                | bigNumberFormat: tokensDecimals["HEX2X"]:true:false:5
            }}
          </td>
          <td>
            {{
              deposit.bigPayDay
                | bigNumberFormat: tokensDecimals["HEX2X"]:true:false:5
            }}&nbsp;AXN
          </td>
          <td></td>
          <td class="action-button">
            <button
              class="btn btn__transparent"
              (click)="depositWithdraw(deposit)"
              [ngClass]="{ progress: deposit.withdrawProgress }"
              [disabled]="deposit.withdrawProgress"
            >
              <span class="lds-ellipsis" *ngIf="deposit.withdrawProgress">
                <span class="lds-ellipsis-container">
                  <span></span><span></span><span></span><span></span>
                </span>
              </span>
              <span>&nbsp;&nbsp;Withdraw&nbsp;&nbsp;</span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div
    class="content-block"
    *ngIf="depositsLists?.closed.length && tokensDecimals"
  >
    <div class="content-block_title text-left">
      <span>Deposit history</span>
    </div>
    <table class="standard-table" cellpadding="0" cellspacing="0" border="0">
      <thead>
        <tr>
          <th>Start date</th>
          <th>End date</th>
          <th>Progress</th>
          <th>Principal</th>
          <th>Shares</th>
          <th>BigPayDay</th>
          <th>Interest</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let deposit of depositsLists.closed">
          <td>{{ deposit.start | date: "dd.MM.yyyy" }}</td>
          <td>{{ deposit.end | date: "dd.MM.yyyy" }}</td>
          <td>{{ getProgress(deposit) }}%</td>
          <td>
            {{
              deposit.amount
                | bigNumberFormat: tokensDecimals["HEX2X"]:true:false:5
            }}
          </td>
          <td>
            {{
              deposit.shares
                | bigNumberFormat: tokensDecimals["HEX2X"]:true:false:5
            }}
          </td>
          <td>
            {{
              deposit.bigPayDay
                | bigNumberFormat: tokensDecimals["HEX2X"]:true:false:5
            }}&nbsp;AXN
          </td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
